// Top-level build file where you can add configuration options common to all sub-projects/modules.
buildscript {
  repositories {
    google()
    mavenCentral()
    jcenter()
  }
  dependencies {
    classpath 'com.android.tools.build:gradle:4.1.3'
    classpath 'org.jacoco:org.jacoco.core:0.8.7'
  }
}

plugins {
  id "org.sonarqube" version "3.2.0"
}

sonarqube {
  properties {
    property "sonar.organization", "castanie"
    property "sonar.projectKey", "castanie_SE2-Risiko"
    property "sonar.host.url", "https://sonarcloud.io"
    property "sonar.coverage.jacoco.xmlReportPaths", "${}/*/build/reports/jacoco/test/jacocoTestReport.xml"
  }
}

allprojects {
  repositories {
    google()
    mavenCentral()
    jcenter()
  }
}

subprojects {
  apply plugin: 'org.sonarqube'
  sonarqube {
    properties {
      property 'sonar.coverage.jacoco.xmlReportPaths', "${projectDir}/build/reports/jacoco/test/jacocoTestReport.xml"
    }
  }

  tasks.withType(Test).configureEach {
    useJUnitPlatform()
  }
}

task clean(type: Delete) {
  delete rootProject.buildDir
}
